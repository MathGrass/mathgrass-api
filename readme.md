# MathGrass Documentation

## Dependency Services

### Rabbit MQ
- install rabbitmq on your system
- api and evaluator use localhost as message bus host


### Database
- install postgress and launch it
- connect to postgres and run `CREATE DATABASE mathgrass-db`


### Architecture
![Architecture](docs/architecture.png?raw=true "Architecture")


## DTO Model
- generated by swagger codegen spec (see `openapi-spec/graphex-minimal.yaml`)
- when the API is started the swagger UI is available at `http://localhost:8080/swagger-ui.html`



## API
### Developer Setup
- ensure all setup steps from the readme in the root of MathGrass
- install dependencies
- execute `build generateApi` from terminal in api root or use IntelliJ: `Gradle Tasks -> other -> generateApi`
- launch with .env file (use IntelliJ SpringBoot Config and EnvFile Plugin)
- for swager docs go to: `http://localhost:8080/swagger-ui/`


![IntelliJ Setup](docs/intellij-debug-setup.png?raw=true "IntelliJ Setup")


### Swagger Spec
- can be found in `openapi-spec/graphex-minimal.yaml`
- endpoints in the beginning of the file
- dtos in the end of the file

### Inner Workings
- API und DB models are transformed to each other by classes that inherit from ModelTransformer under `src/main/java/de/tudresden/inf/st/mathgrassserver/transform`







#### Entity Relationship Diagram

![Entity Relationship Diagram](docs/er-diagram.png?raw=true "Entity Relationship Diagram")



### Configuration
- configure database with `src/main/resources/application.properties`


### Troubleshooting
- The API won't start as long as there is no message queue reachable




## Evaluator

### Developer Setup
- ensure all setup steps from the readme in the root of MathGrass
- install docker
- install requirements via `pip install -r requirements.txt`
- start with `python3 main.py`


### Inner Workings
- sage command: sage `<filename> <answer-as-base64> <graph-as-base64>`